<!DOCTYPE html>
<html>
    <head>
        <title>Capstone</title>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="bower_components/Materialize/bin/materialize.css" type="text/css" />
        <link href='https://fonts.googleapis.com/css?family=Lato:400,100italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="bower_components/slick-carousel/slick/slick-theme.css" type="text/css" />
         <link rel="stylesheet" href="bower_components/slick-carousel/slick/slick.css" type="text/css" />
          <link rel="stylesheet" href="capstone/modal/css/" type="text/css/normalize.min.css" />
         <link rel="stylesheet" href="capstone/modal/css/animate.min.css" type="text/css" />
        
        
        
    </head>
    <body>
        
        
  <div id="usage">
        <!--THIS IS IMPORTANT! to close the modal, the class name has to match the name given on the ID  class="close-animatedModal" -->
        <div class="close-usage"> 
           <center>
             	<div class="close-black"> <i class="material-icons icon-black">close</i></div>
            </center> 
        </div>
            
        <div class="modal-content">
            <div class="container">
                 Talk about how to use the spftware and ayda yada yada right here
            </div>
               
        </div>
    </div>
        
        

    <div id="documentation">
        <!--THIS IS IMPORTANT! to close the modal, the class name has to match the name given on the ID  class="close-animatedModal" -->
        <div class="close-documentation"> 
           <center>
             	<div class="close-black"> <i class="material-icons icon-black">close</i></div>
            </center> 
        </div>
            
        <div class="modal-content">
             <div class="container">
                In order to remove unwanted environmental noise an Active Noise Cancellation (ANC) Software will be created as aforementioned. This software will reduce unwanted noise by producing a waveform which is in antiphase with the original noise, or an anti-noise, and playing it to the user. While the software is running on the computer system it will capture the unwanted noise from the environment through the microphone on the computer. The frequency and amplitude of the captured noise will be determined by the ANC software and an anti-noise will be formulated. That anti-noise and the environmental noise will then be simultaneously heard by the user which will therefore result in the user hearing only the desired input, and if there is none, the user would instead “hear silence”. 

System Structure

The system architecture used is a Pipe and Filter(hereafter referred to as P&F) or Pipeline architecture. In the P&F architecture, there are two types of components, the pipe and the filter. The pipe serves as the messaging system or communication channel, while the filter performs one or more transformations on the data being passed by the previously connected pipe. The key to P&F is that each operation occurs concurrently, allowing data to be output at a continuous rate. A simple pictorial description of a regular system is seen in the picture below.


Taken from http://www.cs.sjsu.edu/~pearce/modules/patterns/distArch/pipeline.htm


Pipe and Filter is ideal for situations where there are many transforms to be executed concurrently, and was thought to be inspired for use in signal processing systems. In our system, the P&F allows the output of SoundOut to constantly be played back to the user, without blocking and waiting for the sound to be calculated. This is achieved through the use of threading during the calculations. Our pipes represent data transfer between methods, and our filters are the multiple transforms executed on the data. In the figure below we show a depiction of our system in P&F.


The transforms above are coroutines, meaning they operate at the same time. The data travels through the system from the moment noise is captured through to the playback of the anti-noise, with each step occurring concurrently.

Approaches
To solve the problem of creating the anti-noise to be played, we devised two key strategies.

Approaches to Creating the Anti-Noise

1st Approach to creating anti-noise - We analyze the shapes of the ambient noise.

Within the first phase of this approach, the system accepts a continuous stream of samples of the noise surrounding the microphone. For this approach, the software needs to know what it’s looking for. It specifies noise therefore as the loudest frequencies within a sampled sound, or specifically, those with the highest amplitudes.

After the program has begun running, the system uses a grouping of frequency ranges called the Bark Scale to identify and focus on specific frequency bands. The bark scale is a non-linear frequency scale modeling the resolution of the human hearing system. A depiction of Barks vs. Frequencies is seen below.

Bark Scale as a mapping of Bark vs. Frequency.
 

The system groups these samples by their barks, and looks for the bark which holds the frequency with the highest amplitude, in order to narrow down how many values the system has to monitor.

Because the system is an adaptive one, it constantly has to check for any new sources of noise, which it recognizes by frequency changes that carry it outside of the current bark. The system must therefore run in an infinite loop, which allows for adjustments to be made further down the pipeline. These operations must be carried out within a matter of milliseconds, to which this approach accomplishes within 150-200 ms per calculation.

In order to build a suitable impulse response function, we have to find not only the most prevalent frequency within the sound, but also those within a relatively close level of loudness. We defined this relative closeness as any of the top six frequencies with a relative loudness of 20% of the loudest frequency. These frequencies allow us to better calculate our impulse response function, and get a “picture” of the noise.	

The second phase involves using the method of recording these top frequency values to create our impulse response function. To do this, we record multiple samples of that subrange (as specified by the bark scale), looking for the prevalent frequencies within them.

We subsequently take the average of these most prevalent frequencies over 3-4 samples, and use these averaged results as an expected (safe) range of values within this subrange. Using data aggregation, we calculate average expected frequencies based on these values to get closer to the true frequencies contained within the noise. Subsequently, in an effort  to implement prediction and correction, we compare the expected value which were calculated to the actual value at the time when the inverted noise is applied. This value can be used to give us a better average for the next calculation.

            </div>
                
        </div>
    </div>
        
        
        
        
        
        
         <div id="download">
        <!--THIS IS IMPORTANT! to close the modal, the class name has to match the name given on the ID  class="close-animatedModal" -->
        <div class="close-download"> 
           <center>
             	<div class="close-black"> <i class="material-icons icon-black">close</i></div>
            </center> 
        </div>
            
        <div class="modal-content">
                 <div class="container downcontainer">
                     <center><a class="waves-effect waves-light btn-large">Download SoundOut<i class="material-icons left">get_app</i></a></center>
                    
                     <div><img src="capstone/img/dw1.png"></img></div>
                 </div>
        </div>
    </div>
        
        
        
        
        
        
        
        
        
    
      <div>
          <center>
               <span class="sound">Sound</span><span class="out">Out</span>
          </center>
      </div>
      
      <div class="container">
           <nav>
             <center>
                 
                 <a  class="usage menutxt" href="#usage">Usage</a>
                 <a  class="documentation menutxt" href="#documentation">Documentation</a>
                 <a  class="download menutxt" href="#download">Download</a>
             </center>
               
          
          </nav>
      </div>
      
      <div class="bottom container">
          <div class="row">
                <div class="col l3">&nbsp</div>
                <div class="col l7">
                     <div class="your-class">
            
                        <div><img src="capstone/img/1.png"></img></div>
                        <div><img src="capstone/img/2.png"></img></div>
                        <div><img src="capstone/img/3.png"></img></div>
                        <div><img src="capstone/img/4.png"></img></div>
                    </div>
                </div>
                <div class="col l2">&nbsp</div>
          </div>
         
            
       
        
        
        <div class="hold row">
           <!-- <center>
                 <span class='heading'> Noise cancellation software</span> 
            </center>-->
            
            <div class="col l4">
                <span class="topic"> What are the applications?</span>
                <ul class="border">
                    <li>Reduction of ambient noise</li>
                     <li>Peace of mind and lowered blood pressure</li>
                      <li>other awesome stuff goes here</li>
                </ul>
            </div>
            
            
            <div  class="col l4">
                <span class="topic"> What are the features?</span>
                <ul class="border">
                    <li>Cancellation of noise at 70-180Hz</li>
                     <li>Cancellation of other stuff</li>
                      <li>Cancellation of other stuff will go here</li>
                </ul>
            </div>
            
            
            <div  class="col l4 ">
                <span class="topic"> System Requirements?</span>
                <ul class="border">
                    <li>Windows XP/Vista/7/8/8.1/10</li>
                     <li>Mac OS X 10.4 or above</li>
                      <li>Android version runs on 2.3.3 or higher</li>
                </ul>
            </div>
           
        </div>
        
        
        
      </div>
       
    
        <footer class="page-footer">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <span class="fsound">Sound</span><span class="fout">Out</span>
                <p class="grey-text text-lighten-4">A joint effort by those who love silence.</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Contributors</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Kelsey Colquhoune</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Jermaine Hewitt</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Christopher Derrel</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Hevon Gordon</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            © 2016 Copyright Text
            </div>
          </div>
        </footer>
      
    

    <!--DEMO01-->
   
        <script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="bower_components/Materialize/bin/materialize.js"></script>
        <script type="text/javascript" src="bower_components/slick-carousel/slick/slick.js"></script>
        <script type="text/javascript" src="capstone/modal/modal.js"></script>
        
        
         <script type="text/javascript">
            $(document).ready(function(){
              $('.your-class').slick({
                  slidesToShow: 1,
                  slidesToScroll: 1,
                  autoplay: true,
                  autoplaySpeed: 4000,
                 
            });
            });
            
            
           
             $(".usage").animatedModal({
              	modalTarget:'usage',
              	animatedIn:'bounceInRight',
            	animatedOut:'bounceOutDown',
            	color:'white'
             });
            
             $(".documentation").animatedModal({
              	modalTarget:'documentation',
              	animatedIn:'bounceInRight',
            	animatedOut:'bounceOutDown',
            	color:'white'
             });
            
            
             $(".download").animatedModal({
              	modalTarget:'download',
              	animatedIn:'bounceInRight',
            	animatedOut:'bounceOutDown',
            	color:'white'
             });
            
            
         </script>
    </body>
    
    
    
    <style type="text/css">
    footer.page-footer {
  
  background-color: teal;
}
    .border{
        border-top:2px solid teal;
    }
    .downcontainer{
        margin-top:60px;
    }
            .close-black{
            margin-top: 50px;
            width:50px;
            height:50px;
            border:1px solid teal;
            border-radius: 50px;
            cursor: pointer;
             cursor: hand; 
        }
        
        .icon-black{
            font-size: 3rem;
            margin-top:2.5px;
            color:teal;
        }
    
        li{
            
            padding:10px;
            
        }  
        .foot-name{
            font-family: 'Knewave', cursive; 
        }
        .sound{
            font-family: 'Knewave', cursive;
            font-size:100px;
            color:teal;
        }
        .fsound{
            font-family: 'Knewave', cursive;
            font-size:60px;
            color:white;
        }
        .out{
             font-family: 'Lato', sans-serif;
             font-size:100px;
             color:gray;
        }
         .fout{
             font-family: 'Lato', sans-serif;
             font-size:60px;
             color:white;
        }
        .topic{
             font-family: 'Lato', sans-serif;
             color:teal;
             font-size:20px;
        }
        nav{
            background-color:white;
            
        }
        
        .menutxt{
            color:teal;
            padding:20px;
           
        }
        .bottom{
            height:500px;
            margin-top:20px;
            color:gray;
            
        }
        .heading{
            font-size:55px;
            color:teal;
            font-family: 'Knewave', cursive;
        }
        .hold{
            padding-top:60px;
        }
      
    </style>
</html>